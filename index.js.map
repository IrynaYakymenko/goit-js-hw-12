{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from \"simplelightbox\";\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nlet lightbox;\n\nexport const createImageCard = image => {\n    return `\n        <li class=\"gallery-item\">\n            <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n                <img\n                    class=\"gallery-image\"\n                    src=\"${image.webformatURL}\"\n                    data-source=\"${image.largeImageURL}\"\n                    alt=\"${image.tags}\"\n                />\n                </a> \n                <div class=\"describe\">\n                <div class=\"info\">\n                    <span class=\"label\">Likes</span><br>\n                    <span class=\"value\" data-likes>${image.likes}</span>\n                </div>\n                <div class=\"info\">\n                    <span class=\"label\">Views</span></span><br>\n                    <span class=\"value\" data-views>${image.views}</span>\n                </div>\n                <div class=\"info\">\n                    <span class=\"label\">Comments</span><br>\n                    <span class=\"value\" data-comments>${image.comments}</span>\n                </div>\n                <div class=\"info\">\n                    <span class=\"label\" >Downloads</span><br>\n                    <span class=\"value\" data-downloads>${image.downloads}</span>\n                </div>  \n                </div>\n        </li>\n    `;\n  };\n\nexport const renderGallery = (images, galleryRef) => {\n    const imageCards = images.map(img => createImageCard(img)).join('');\n        galleryRef.insertAdjacentHTML('beforeend', imageCards);\n\n        if (!lightbox) {\n            lightbox = new SimpleLightbox('.gallery a', { captionsData: 'alt', captionDelay: 250 });\n        } else {\n            lightbox.refresh();\n        }\n\n};\n\nexport const clearGallery = galleryRef => {\n    galleryRef.innerHTML = '';\n};","import axios from 'axios';\n\nconst API_KEY = '49388165-2207654a79f52bc7a4c348d65';\n\naxios.defaults.baseURL = 'https://pixabay.com/api/';\n\nexport const fetchData = async (query, page = 1, per_page = 15) => {\n    const params = {\n        key: API_KEY,\n        q: query,\n        page: page,\n        per_page: per_page,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        per_page: 15,\n    }\n    try {\n        const { data } = await axios.get('', { params });\n        return data;\n    } catch (error) {\n        console.error('Error fetching data from Pixabay:', error);\n        throw new Error('Failed to fetch data');\n    }\n};\n","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport { renderGallery, clearGallery } from './js/render-functions';\nimport { fetchData } from './js/pixabay-api';\n\nlet currentPage = 1;\nlet currentQuery = '';\n\nconst refs = {\n    searchForm: document.querySelector('.form'),\n    gallery: document.querySelector('.gallery'),\n    loader: document.querySelector('.loader'),\n    loadMoreBtn: document.querySelector('.load-more'),\n};\n\nconst onSearchImage = async event => {\n    event.preventDefault();\n    \n    const query = event.currentTarget.elements[\"search-text\"].value.trim();\n    if (query === '') {\n        iziToast.warning({\n            title: 'Warning',\n            message: 'Поле не має бути порожнім!',\n            position: 'topRight'\n        });\n        return;\n    }\n\n    currentQuery = query;\n    currentPage = 1;\n    clearGallery(refs.gallery);\n    refs.loadMoreBtn.classList.add('is-hidden');\n    await loadImages(true);\n};\n\nconst loadImages = async (isNewSearch = false) => {\n    try {\n        refs.loader.classList.remove('hidden');\n        const data = await fetchData(currentQuery, currentPage);\n        \n        if (data.hits.length === 0) {\n            iziToast.warning({\n                title: 'Warning',\n                message: 'Sorry, no images found. Please try again!',\n                position: 'topRight'\n            });\n            return;\n        }\n\n        renderGallery(data.hits, refs.gallery);\n\n        if (currentPage > 1) {\n            setTimeout(() => {\n                const galleryHeight = refs.gallery.getBoundingClientRect().height;\n                window.scrollBy({ top: galleryHeight * 2, behavior: 'smooth' });\n            }, 300);\n        }\n        \n        const totalPages = Math.ceil(data.totalHits / 15);\n        if (currentPage >= totalPages) {\n            refs.loadMoreBtn.classList.add('is-hidden');\n            iziToast.info({\n                title: 'End of results',\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: 'topRight'\n            });\n        } else {\n            refs.loadMoreBtn.classList.remove('is-hidden');\n        }\n\n        currentPage++;\n    } catch (err) {\n        console.log(err);\n    } finally {\n        refs.loader.classList.add('hidden');\n    }\n};\n\nrefs.searchForm.addEventListener('submit', onSearchImage);\nrefs.loadMoreBtn.addEventListener('click', loadImages);\n\n"],"names":["lightbox","createImageCard","image","renderGallery","images","galleryRef","imageCards","img","SimpleLightbox","clearGallery","API_KEY","axios","fetchData","query","page","per_page","params","data","error","currentPage","currentQuery","refs","onSearchImage","event","iziToast","loadImages","isNewSearch","galleryHeight","totalPages","err"],"mappings":"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"}