{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export const createImageCard = image => {\n    return `\n        <li class=\"gallery-item\">\n            <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n                <img\n                    class=\"gallery-image\"\n                    src=\"${image.webformatURL}\"\n                    data-source=\"${image.largeImageURL}\"\n                    alt=\"${image.tags}\"\n                />\n                </a> \n                <div class=\"describe\">\n                <div class=\"info\">\n                    <span class=\"label\">Likes</span><br>\n                    <span class=\"value\" data-likes>${image.likes}</span>\n                </div>\n                <div class=\"info\">\n                    <span class=\"label\">Views</span></span><br>\n                    <span class=\"value\" data-views>${image.views}</span>\n                </div>\n                <div class=\"info\">\n                    <span class=\"label\">Comments</span><br>\n                    <span class=\"value\" data-comments>${image.comments}</span>\n                </div>\n                <div class=\"info\">\n                    <span class=\"label\" >Downloads</span><br>\n                    <span class=\"value\" data-downloads>${image.downloads}</span>\n                </div>  \n                </div>\n        </li>\n    `;\n  };\n","import axios from 'axios';\n\naxios.defaults.baseURL = 'https://pixabay.com';\n\nexport const fetchData = async (query, page = 1) => {\n    return axios.get(`/api/?key=49388165-2207654a79f52bc7a4c348d65&q=${query}&image_type=photo&orientation=horizontal&safesearch=true&per_page=15&page=${page}`);\n};\n","import axios from 'axios';\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\n\nimport { createImageCard } from './js/render-functions';\nimport { fetchData } from './js/pixabay-api';\n\nlet lightbox;\nlet currentPage = 1;\nlet currentQuery = '';\n\nconst refs = {\n    searchForm: document.querySelector('.form'),\n    gallery: document.querySelector('.gallery'),\n    loader: document.querySelector('.loader'),\n    loadMoreBtn: document.querySelector('.load-more'),\n};\n\nconst onSearchImage = async event => {\n    event.preventDefault();\n    \n    const query = event.currentTarget.elements[\"search-text\"].value.trim();\n    if (query === '') {\n        iziToast.warning({\n            title: 'Warning',\n            message: 'Поле не має бути порожнім!',\n            position: 'topRight'\n        });\n        return;\n    }\n\n    currentQuery = query;\n    currentPage = 1;\n    refs.gallery.innerHTML = \"\";\n    refs.loadMoreBtn.classList.add('is-hidden');\n    \n    await loadImages(true);\n};\n\nconst loadImages = async (isNewSearch = false) => {\n    try {\n        refs.loader.classList.remove('hidden');\n        const { data } = await fetchData(currentQuery, currentPage);\n        \n        if (data.hits.length === 0) {\n            iziToast.warning({\n                title: 'Warning',\n                message: 'Sorry, no images found. Please try again!',\n                position: 'topRight'\n            });\n            return;\n        }\n\n        const imageCards = data.hits.map(img => createImageCard(img)).join('');\n        refs.gallery.insertAdjacentHTML('beforeend', imageCards);\n\n        if (!lightbox) {\n            lightbox = new SimpleLightbox('.gallery a', { captionsData: 'alt', captionDelay: 250 });\n        } else {\n            lightbox.refresh();\n        }\n\n        if (currentPage > 1) {\n            setTimeout(() => {\n                const galleryHeight = refs.gallery.getBoundingClientRect().height;\n                window.scrollBy({ top: galleryHeight, behavior: 'smooth' });\n            }, 300);\n        }\n        \n        const totalPages = Math.ceil(data.totalHits / 15);\n        if (currentPage >= totalPages) {\n            refs.loadMoreBtn.classList.add('is-hidden');\n            iziToast.info({\n                title: 'End of results',\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: 'topRight'\n            });\n        } else {\n            refs.loadMoreBtn.classList.remove('is-hidden');\n        }\n\n        currentPage++;\n    } catch (err) {\n        console.log(err);\n    } finally {\n        refs.loader.classList.add('hidden');\n    }\n};\n\nrefs.searchForm.addEventListener('submit', onSearchImage);\nrefs.loadMoreBtn.addEventListener('click', loadImages);\n\n"],"names":["createImageCard","image","axios","fetchData","query","page","lightbox","currentPage","currentQuery","refs","onSearchImage","event","iziToast","loadImages","isNewSearch","data","imageCards","img","SimpleLightbox","galleryHeight","totalPages","err"],"mappings":"owBAAO,MAAMA,EAAkBC,GACpB;AAAA;AAAA,4CAEiCA,EAAM,aAAa;AAAA;AAAA;AAAA,2BAGpCA,EAAM,YAAY;AAAA,mCACVA,EAAM,aAAa;AAAA,2BAC3BA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qDAMgBA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,qDAIXA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,wDAIRA,EAAM,QAAQ;AAAA;AAAA;AAAA;AAAA,yDAIbA,EAAM,SAAS;AAAA;AAAA;AAAA;AAAA,MCxBxEC,EAAM,SAAS,QAAU,sBAElB,MAAMC,EAAY,MAAOC,EAAOC,EAAO,IACnCH,EAAM,IAAI,kDAAkDE,CAAK,6EAA6EC,CAAI,EAAE,ECG/J,IAAIC,EACAC,EAAc,EACdC,EAAe,GAEnB,MAAMC,EAAO,CACT,WAAY,SAAS,cAAc,OAAO,EAC1C,QAAS,SAAS,cAAc,UAAU,EAC1C,OAAQ,SAAS,cAAc,SAAS,EACxC,YAAa,SAAS,cAAc,YAAY,CACpD,EAEMC,EAAgB,MAAMC,GAAS,CACjCA,EAAM,eAAgB,EAEtB,MAAMP,EAAQO,EAAM,cAAc,SAAS,aAAa,EAAE,MAAM,KAAM,EACtE,GAAIP,IAAU,GAAI,CACdQ,EAAS,QAAQ,CACb,MAAO,UACP,QAAS,6BACT,SAAU,UACtB,CAAS,EACD,MACR,CAEIJ,EAAeJ,EACfG,EAAc,EACdE,EAAK,QAAQ,UAAY,GACzBA,EAAK,YAAY,UAAU,IAAI,WAAW,EAE1C,MAAMI,EAAW,EAAI,CACzB,EAEMA,EAAa,MAAOC,EAAc,KAAU,CAC9C,GAAI,CACAL,EAAK,OAAO,UAAU,OAAO,QAAQ,EACrC,KAAM,CAAE,KAAAM,CAAM,EAAG,MAAMZ,EAAUK,EAAcD,CAAW,EAE1D,GAAIQ,EAAK,KAAK,SAAW,EAAG,CACxBH,EAAS,QAAQ,CACb,MAAO,UACP,QAAS,4CACT,SAAU,UAC1B,CAAa,EACD,MACZ,CAEQ,MAAMI,EAAaD,EAAK,KAAK,IAAIE,GAAOjB,EAAgBiB,CAAG,CAAC,EAAE,KAAK,EAAE,EACrER,EAAK,QAAQ,mBAAmB,YAAaO,CAAU,EAElDV,EAGDA,EAAS,QAAS,EAFlBA,EAAW,IAAIY,EAAe,aAAc,CAAE,aAAc,MAAO,aAAc,IAAK,EAKtFX,EAAc,GACd,WAAW,IAAM,CACb,MAAMY,EAAgBV,EAAK,QAAQ,sBAAuB,EAAC,OAC3D,OAAO,SAAS,CAAE,IAAKU,EAAe,SAAU,SAAU,CAC7D,EAAE,GAAG,EAGV,MAAMC,EAAa,KAAK,KAAKL,EAAK,UAAY,EAAE,EAC5CR,GAAea,GACfX,EAAK,YAAY,UAAU,IAAI,WAAW,EAC1CG,EAAS,KAAK,CACV,MAAO,iBACP,QAAS,6DACT,SAAU,UAC1B,CAAa,GAEDH,EAAK,YAAY,UAAU,OAAO,WAAW,EAGjDF,GACH,OAAQc,EAAK,CACV,QAAQ,IAAIA,CAAG,CACvB,QAAc,CACNZ,EAAK,OAAO,UAAU,IAAI,QAAQ,CAC1C,CACA,EAEAA,EAAK,WAAW,iBAAiB,SAAUC,CAAa,EACxDD,EAAK,YAAY,iBAAiB,QAASI,CAAU"}